{"version":3,"file":"src_js_components_validation_js.main.js","mappings":";;;;;;;;;;;AAA2D;AAC3D,MAAMC,KAAK,GAAG,CACZ;EACEC,YAAY,EAAE,aAAa;EAC3BD,KAAK,EAAE,CACL;IACEE,IAAI,EAAE,WAAW;IACjBC,KAAK,EAAE;EACT,CAAC,EACD;IACED,IAAI,EAAE,UAAU;IAChBC,KAAK,EAAE,IAAI;IACXC,YAAY,EAAE;EAChB,CAAC;AAEL,CAAC,EACD;EACEH,YAAY,EAAE,YAAY;EAC1BI,GAAG,EAAE,IAAI;EACTC,QAAQ,EAAE,4BAA4B;EACtCN,KAAK,EAAE,CACL;IACEE,IAAI,EAAE,UAAU;IAChBC,KAAK,EAAE,IAAI;IACXC,YAAY,EAAE;EAChB,CAAC;AAEL,CAAC,EACD;EACEH,YAAY,EAAE,cAAc;EAC5BI,GAAG,EAAE,IAAI;EACTC,QAAQ,EAAE,iBAAiB;EAC3BN,KAAK,EAAE,CACL;IACEE,IAAI,EAAE,UAAU;IAChBC,KAAK,EAAE,IAAI;IACXC,YAAY,EAAE;EAChB,CAAC;AAEL,CAAC,CACF;AAED,MAAMG,SAAS,GAAG,MAAM;EACtBC,OAAO,CAACC,GAAG,CAAC,qDAAqD,CAAC;AACpE,CAAC;AAEDV,wEAAa,CAAC,cAAc,EAAEC,KAAK,EAAEO,SAAS,CAAC;;;;;;;;;;;;;;;;;AC9CN;AACP;AAE3B,MAAMR,aAAa,GAAG,CAACa,QAAQ,EAAEZ,KAAK,EAAEa,SAAS,KAAK;EAAA;EAC3D,MAAMC,IAAI,gBAAGC,QAAQ,8CAAR,UAAUC,aAAa,CAACJ,QAAQ,CAAC;EAC9C,MAAMK,WAAW,GAAGH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,aAAa,CAAC,mBAAmB,CAAC;EAE5D,IAAI,CAACF,IAAI,EAAE;IACTN,OAAO,CAACU,KAAK,CAAC,uBAAuB,CAAC;IACtC,OAAO,KAAK;EACd;EAEA,IAAI,CAAClB,KAAK,EAAE;IACVQ,OAAO,CAACU,KAAK,CAAC,mCAAmC,CAAC;IAClD,OAAO,KAAK;EACd;EAEA,IAAID,WAAW,EAAE;IACf,MAAME,SAAS,GAAG,IAAIR,kDAAS,CAAC,oBAAoB,CAAC;IACrDQ,SAAS,CAACC,IAAI,CAACH,WAAW,CAAC;IAE3B,KAAK,IAAII,IAAI,IAAIrB,KAAK,EAAE;MACtB,IAAIqB,IAAI,CAAChB,GAAG,EAAE;QACZgB,IAAI,CAACrB,KAAK,CAACsB,IAAI,CAAC;UACdpB,IAAI,EAAE,UAAU;UAChBqB,SAAS,EAAE,YAAW;YACpB,MAAMC,KAAK,GAAGP,WAAW,CAACQ,SAAS,CAACC,aAAa,EAAE;YACnD,OAAOF,KAAK,CAACG,MAAM,KAAK,EAAE;UAC5B,CAAC;UACDvB,YAAY,EAAEiB,IAAI,CAACf;QACrB,CAAC,CAAC;MACJ;IACF;EACF;EAEA,MAAMsB,UAAU,GAAG,IAAIlB,qDAAY,CAACE,QAAQ,CAAC;EAE7C,KAAK,IAAIS,IAAI,IAAIrB,KAAK,EAAE;IACtB4B,UAAU,CACPC,QAAQ,CAACR,IAAI,CAACpB,YAAY,EAAEoB,IAAI,CAACrB,KAAK,CAAC;EAC5C;EAEA4B,UAAU,CAACE,SAAS,CAAEC,EAAE,IAAK;IAC3B,IAAIC,QAAQ,GAAG,IAAIC,QAAQ,CAACF,EAAE,CAACG,MAAM,CAAC;IAEtC,IAAIC,GAAG,GAAG,IAAIC,cAAc,EAAE;IAE9BD,GAAG,CAACE,kBAAkB,GAAG,YAAY;MACnC,IAAIF,GAAG,CAACG,UAAU,KAAK,CAAC,EAAE;QACxB,IAAIH,GAAG,CAACI,MAAM,KAAK,GAAG,EAAE;UACtB,IAAI1B,SAAS,EAAE;YACbA,SAAS,EAAE;UACb;UACAL,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;QAC3B;MACF;IACF,CAAC;IAED0B,GAAG,CAACK,IAAI,CAAC,MAAM,EAAE,UAAU,EAAE,IAAI,CAAC;IAClCL,GAAG,CAACM,IAAI,CAACT,QAAQ,CAAC;IAElBD,EAAE,CAACG,MAAM,CAACQ,KAAK,EAAE;EACnB,CAAC,CAAC;AAEJ,CAAC","sources":["webpack://gulp-builder/./src/js/components/validation.js","webpack://gulp-builder/./src/js/functions/validate-forms.js"],"sourcesContent":["import { validateForms } from '../functions/validate-forms'\nconst rules = [\n  {\n    ruleSelector: '.input-name',\n    rules: [\n      {\n        rule: 'minLength',\n        value: 3,\n      },\n      {\n        rule: 'required',\n        value: true,\n        errorMessage: 'Заполните имя!',\n      },\n    ],\n  },\n  {\n    ruleSelector: '.input-tel',\n    tel: true,\n    telError: 'Введите корректный телефон',\n    rules: [\n      {\n        rule: 'required',\n        value: true,\n        errorMessage: 'Заполните телефон!',\n      },\n    ],\n  },\n  {\n    ruleSelector: '.input-email',\n    tel: true,\n    telError: 'Заполните Email',\n    rules: [\n      {\n        rule: 'required',\n        value: true,\n        errorMessage: 'Введите корректный Email!',\n      },\n    ],\n  },\n]\n\nconst afterForm = () => {\n  console.log('Произошла отправка, тут можно писать любые действия')\n}\n\nvalidateForms('.order__form', rules, afterForm)\n","import JustValidate from 'just-validate';\nimport Inputmask from \"inputmask\";\n\nexport const validateForms = (selector, rules, afterSend) => {\n  const form = document?.querySelector(selector);\n  const telSelector = form?.querySelector('input[type=\"tel\"]');\n\n  if (!form) {\n    console.error('Нет такого селектора!');\n    return false;\n  }\n\n  if (!rules) {\n    console.error('Вы не передали правила валидации!');\n    return false;\n  }\n\n  if (telSelector) {\n    const inputMask = new Inputmask('+7 (999) 999-99-99');\n    inputMask.mask(telSelector);\n\n    for (let item of rules) {\n      if (item.tel) {\n        item.rules.push({\n          rule: 'function',\n          validator: function() {\n            const phone = telSelector.inputmask.unmaskedvalue();\n            return phone.length === 10;\n          },\n          errorMessage: item.telError\n        });\n      }\n    }\n  }\n\n  const validation = new JustValidate(selector);\n\n  for (let item of rules) {\n    validation\n      .addField(item.ruleSelector, item.rules);\n  }\n\n  validation.onSuccess((ev) => {\n    let formData = new FormData(ev.target);\n\n    let xhr = new XMLHttpRequest();\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) {\n          if (afterSend) {\n            afterSend();\n          }\n          console.log('Отправлено');\n        }\n      }\n    }\n\n    xhr.open('POST', 'mail.php', true);\n    xhr.send(formData);\n\n    ev.target.reset();\n  })\n\n};\n"],"names":["validateForms","rules","ruleSelector","rule","value","errorMessage","tel","telError","afterForm","console","log","JustValidate","Inputmask","selector","afterSend","form","document","querySelector","telSelector","error","inputMask","mask","item","push","validator","phone","inputmask","unmaskedvalue","length","validation","addField","onSuccess","ev","formData","FormData","target","xhr","XMLHttpRequest","onreadystatechange","readyState","status","open","send","reset"],"sourceRoot":""}